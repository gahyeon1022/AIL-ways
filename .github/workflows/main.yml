name: Discord Notifications

on:
  push:
    branches:
      - '**'          # ëª¨ë“  ë¸Œëœì¹˜ (main, feat/**, chore/** ë“± ë‹¤ í¬í•¨)
  pull_request:
    types: [opened, closed, reopened]
  issues:
    types: [opened, closed]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord Notification
        run: |
          if [ "${{ github.event_name }}" = "push" ]; then
            curl -H "Content-Type: application/json" \
            -d '{
                  "embeds": [{
                    "title": "ğŸš€ ìƒˆë¡œìš´ ì½”ë“œê°€ í‘¸ì‹œë˜ì—ˆìŠµë‹ˆë‹¤!",
                    "color": 9282768,
                    "fields": [
                      {"name": "ë ˆí¬ì§€í† ë¦¬", "value": "${{ github.repository }}"},
                      {"name": "ë¸Œëœì¹˜", "value": "${{ github.ref }}"},
                      {"name": "í‘¸ì‹œí•œ ì‚¬ëŒ", "value": "${{ github.actor }}"}
                    ]
                  }]
                }' \
            ${{ secrets.DISCORD_WEBHOOK_URL }}
          elif [ "${{ github.event_name }}" = "pull_request" ]; then
            curl -H "Content-Type: application/json" \
            -d '{
                  "embeds": [{
                    "title": "ğŸ“Œ Pull Request ì´ë²¤íŠ¸ ë°œìƒ",
                    "color": 16304844,
                    "fields": [
                      {"name": "ì œëª©", "value": "${{ github.event.pull_request.title }}"},
                      {"name": "ì‘ì„±ì", "value": "${{ github.actor }}"},
                      {"name": "ìƒíƒœ", "value": "${{ github.event.action }}"},
                      {"name": "ë§í¬", "value": "[PR ë³´ëŸ¬ê°€ê¸°](${{ github.event.pull_request.html_url }})"}
                    ]
                  }]
                }' \
            ${{ secrets.DISCORD_WEBHOOK_URL }}
          elif [ "${{ github.event_name }}" = "issues" ]; then
            curl -H "Content-Type: application/json" \
            -d '{
                  "embeds": [{
                    "title": "ğŸ Issue ì´ë²¤íŠ¸ ë°œìƒ",
                    "color": 11064762,
                    "fields": [
                      {"name": "ì œëª©", "value": "${{ github.event.issue.title }}"},
                      {"name": "ì‘ì„±ì", "value": "${{ github.actor }}"},
                      {"name": "ìƒíƒœ", "value": "${{ github.event.action }}"},
                      {"name": "ë§í¬", "value": "[ì´ìŠˆ ë³´ëŸ¬ê°€ê¸°](${{ github.event.issue.html_url }})"}
                    ]
                  }]
                }' \
            ${{ secrets.DISCORD_WEBHOOK_URL }}
          fi
