name: Discord Notifications

on:
  push:
    branches:
      - '**'
  pull_request:
    types: [opened, closed, reopened]
  issues:
    types: [opened, closed]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord Notification
        run: |
          if [ "${{ github.event_name }}" = "push" ]; then
            curl -H "Content-Type: application/json" \
            -d '{
                  "embeds": [{
                    "title": "🚀 새로운 코드가 푸시되었습니다!",
                    "color": 16249548,
                    "fields": [
                      {"name": "레포지토리", "value": "${{ github.repository }}"},
                      {"name": "브랜치", "value": "${{ github.ref }}"},
                      {"name": "푸시한 사람", "value": "${{ github.actor }}"}
                    ]
                  }]
                }' \
            ${{ secrets.DISCORD_WEBHOOK_URL }}
          elif [ "${{ github.event_name }}" = "pull_request" ]; then
            curl -H "Content-Type: application/json" \
            -d '{
                  "embeds": [{
                    "title": "📌 Pull Request 이벤트 발생",
                    "color": 9288656,
                    "fields": [
                      {"name": "제목", "value": "${{ github.event.pull_request.title }}"},
                      {"name": "작성자", "value": "${{ github.actor }}"},
                      {"name": "상태", "value": "${{ github.event.action }}"},
                      {"name": "링크", "value": "[PR 보러가기](${{ github.event.pull_request.html_url }})"}
                    ]
                  }]
                }' \
            ${{ secrets.DISCORD_WEBHOOK_URL }}
          elif [ "${{ github.event_name }}" = "issues" ]; then
            curl -H "Content-Type: application/json" \
            -d '{
                  "embeds": [{
                    "title": "🐞 Issue 이벤트 발생",
                    "color": 11055162,
                    "fields": [
                      {"name": "제목", "value": "${{ github.event.issue.title }}"},
                      {"name": "작성자", "value": "${{ github.actor }}"},
                      {"name": "상태", "value": "${{ github.event.action }}"},
                      {"name": "링크", "value": "[이슈 보러가기](${{ github.event.issue.html_url }})"}
                    ]
                  }]
                }' \
            ${{ secrets.DISCORD_WEBHOOK_URL }}
          fi
